---
title: 进程和线程
date: 2020-03-15 19:39:06
categories: 
    - 操作系统
---

计算机资源 = 存储资源 + 计算资源  test33
计算资源：由系统分配，操作系统按照一定的规则来分配什么时候由谁来获得CPU的计算资源（CPU是计算单元，对输入的数据和指令进行计算）  
存储资源：就是内存，存储资源是操作系统管理和分配

## 进程
定义：一个程序在一个数据集上的一次运行

进程的三种基本状态：  
1.就绪状态：除CPU外已分配所有资源，等待获得处理机执行  
2.执行状态：获得处理机，程序正在执行  
3.阻塞状态：因等待而无法执行，放弃处理机，处于等待状态。

## 线程
定义：进程中的一个实体（进程中一段程序片段）

## 进程和线程的区别
* 内存空间  
进程的内存空间是独立的，有独立的地址空间，不允许突破进程边界存取其他进程的内存空间；  
线程共享同一个进程中的内存空间，共享的是进程的代码片段、进程打开的文件描述符、信号的处理器、进程的当前目录和进程用户id与进程组id、进程的公有数据（利用这些共享数据，线程很容易实现相互之间的通信）

* 隶属关系  
线程属于进程，进程退出时结束所有线程，线程占用资源少于进程

* 多个执行  
两个进程不能同时执行  
多个线程可以同时执行  
多线程程序只要有一个线程死掉，整个进程也死掉

## 进程间的通讯方式
1.管道：管道是一种半双工的通信方式，数据只能单向流动，速度慢，容量有限，而且只能在具有亲缘关系的进程间使用。进程的亲缘关系通常是指父子进程关系。   
2.命名管道FIFO：有名管道也是半双工的通信方式，但是它允许无亲缘关系的进程间的通信。但是速度慢。  
3.消息队列：消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。但是容量受到系统限制，且要注意第一次读的时候，要考虑上一次没有读完数据的问题。  
4.共享内存：共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的IPC方式，它是针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号量，配合使用，来实现进程间的同步个通信。  
5.信号量：信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。

